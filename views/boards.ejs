<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KanPlan Boards</title>
    <link rel="stylesheet" href="/css/boards.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="form-container">
      <h1><%= userName %>'s Boards</h1>
      <form class="form" action="/board/createBoard" method="POST">
        <div class="mb-3">
          <input
            required
            placeholder="Enter board title"
            type="text"
            class="form-control"
            id="title"
            name="title"
          />
        </div>
        <button
          class="form-button"
          type="submit"
          class="btn btn-primary"
          value="Upload"
        >
          Create Board
        </button>
      </form>
    </div>
    <section class="section">
      <ul class="boards-ul">
        <%for(var i = 0; i < boards.length; i++){%>
        <li class="board">
          <a href="/board/<%= boards[i]._id %>"></a>
          <span><%=boards[i].title%></span>
          <div class="container">
            <div class="btn-wrapper">
              <button class="dropdown-btn">
                <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="m388-80-20-126q-19-7-40-19t-37-25l-118 54-93-164 108-79q-2-9-2.5-20.5T185-480q0-9 .5-20.5T188-521L80-600l93-164 118 54q16-13 37-25t40-18l20-127h184l20 126q19 7 40.5 18.5T669-710l118-54 93 164-108 77q2 10 2.5 21.5t.5 21.5q0 10-.5 21t-2.5 21l108 78-93 164-118-54q-16 13-36.5 25.5T592-206L572-80H388Zm92-270q54 0 92-38t38-92q0-54-38-92t-92-38q-54 0-92 38t-38 92q0 54 38 92t92 38Zm0-60q-29 0-49.5-20.5T410-480q0-29 20.5-49.5T480-550q29 0 49.5 20.5T550-480q0 29-20.5 49.5T480-410Zm0-70Zm-44 340h88l14-112q33-8 62.5-25t53.5-41l106 46 40-72-94-69q4-17 6.5-33.5T715-480q0-17-2-33.5t-7-33.5l94-69-40-72-106 46q-23-26-52-43.5T538-708l-14-112h-88l-14 112q-34 7-63.5 24T306-642l-106-46-40 72 94 69q-4 17-6.5 33.5T245-480q0 17 2.5 33.5T254-413l-94 69 40 72 106-46q24 24 53.5 41t62.5 25l14 112Z"/></svg>
              </button>
              <div class="dropdown">
                <form
                  action="/board/deleteBoard/<%= boards[i]._id %>?_method=DELETE"
                  method="POST"
                >
                  <div class="button-container">
                    <button class="board-delete-btn">
                      <svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path d="M261-120q-24.75 0-42.375-17.625T201-180v-570h-41v-60h188v-30h264v30h188v60h-41v570q0 24-18 42t-42 18H261Zm438-630H261v570h438v-570ZM367-266h60v-399h-60v399Zm166 0h60v-399h-60v399ZM261-750v570-570Z"/></svg>
                    </button>
                  </div>
                </form>
                <div class="update-title-container">
                  <form
                    action="/board/updateTitle/<%= boards[i]._id %>?_method=PUT"
                    method="POST"
                    class="hide update-title-form"
                  >
                    <input type="hidden" name="_method" value="PUT" />
                    <input
                      type="text"
                      placeholder="Enter a new title"
                      name="title"
                    />
                    <button class="update-btn">Update</button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </li>
        <% } %>
      </ul>
      <!--<a href="/">Main Page</a>
      <a href="/logout">Logout</a> -->
    </section>
  </body>
</html>
